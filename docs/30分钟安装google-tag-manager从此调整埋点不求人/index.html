<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://up.ac.cn/images/favicon.png" /><title>30分钟安装Google Tag Manager，从此调整埋点不求人 | 烧钱学院</title>
<meta name="title" content="30分钟安装Google Tag Manager，从此调整埋点不求人" />
<meta name="description" content="GTM代码管理器（Google Tag Manager）是一个 Google 官方工具，安装Google Tag Manager到网站后，可以用来添加和管理第三方代码段。GTM代码管理器就像“中间人”，用于连接网站和其他第三方代码。" />
<meta name="keywords" content="GTM代码管理器," /><meta name="referrer" content="no-referrer-when-downgrade" />
  <style type="text/css">body{font-family:Helvetica,sans-serif;font-size:1.25em;margin:auto;padding:20px;max-width:720px;text-align:justify;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444;}h1,h2,h3,h4,h5,h6,strong,b{color:#222;}a{color:#3273dc;}.title{text-decoration:none;border:0;}.title span{font-weight:500;}nav a{margin-right:10px;}textarea{width:100%;font-size:16px;}input{font-size:16px;}content{line-height:2;}table{width:100%;}img{max-width:100%;}code{padding:2px 5px;background-color:#f2f2f2;}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px;}div.highlight pre{background-color:initial;color:initial;}div.highlight code{background-color:unset;color:unset;}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic;}footer{padding:25px;text-align:center;}.helptext{color:#777;font-size:small;}.errorlist{color:#eba613;font-size:small;}ul.blog-posts{list-style-type:none;padding:unset;}ul.blog-posts li{display:flex;}ul.blog-posts li span{flex:0 0 130px;}ul.blog-posts li a:visited{color:#8b6fcb;}@media (prefers-color-scheme:dark){body{background-color:#333;color:#ddd;}h1,h2,h3,h4,h5,h6,strong,b{color:#eee;}a{color:#8cc2dd;}code{background-color:#777;}pre code{color:#ddd;}blockquote{color:#ccc;}textarea,input{background-color:#252525;color:#ddd;}.helptext{color:#aaa;}}</style>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-96Z4V0B7J7"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-96Z4V0B7J7');
  </script>
</head>
<body>
<header><a href="/" class="title">
  <h2>烧钱学院</h2>
</a>
<nav><a href="/">首页</a>

<a href="/blog">文章</a>


<a href="/about/">关于</a>
</nav></header>
<main>

<h1>30分钟安装Google Tag Manager，从此调整埋点不求人</h1>
<p>
  <i>
    <time datetime='2022-06-08' pubdate>
      2022-06-08
    </time>
  </i>
</p>

<content>
  <p>GTM代码管理器（Google Tag Manager）是一个 Google 官方工具，安装Google Tag Manager到网站后，可以用来添加和管理第三方代码段。GTM代码管理器就像“中间人”，用于连接网站和其他第三方代码。所以只安装GTM没有任何作用，需要在GTM中配置第三方代码后才能发挥作用。</p>
<h2 id="如何创建-google-tag-manager">如何创建 Google Tag Manager</h2>
<p>Google 账户可以登录“Google 全家桶”，包括 Google Tag Manager。所以，有了 Gmail 账户，直接登录 Google Tag Manager即可，无需额外创建账户。并且在同一个 Google Tag Manager 账户下，可以同时管理多个网站或者 APP 对象，不同的对象分别对应的容器下，不会相互影响。如果需要同时管理多个网站，也无需为不同的网站创建多个  Google Tag Manager 账户。</p>
<p>登录 Gmail 账户后，进入<a href="https://tagmanager.google.com/" target="_blank" rel="noopener">Google Tag Manager 官网</a> 会自动开通账户权限。</p>
<h2 id="在gtm中创建-account-和-container">在GTM中创建 Account 和 Container</h2>
<p>同一个 Google Tag Manager 下可以创建多个 Account，同一个 Account 下可以创建多个 Container，一个 Container 对应了一个的 Google Tag Manager 代码，一个 Google Tag Manager 代码只能安装到一个网站或 APP 中。</p>
<p><img src="/images/2022/0609-gtm%E4%B8%AD%E5%88%9B%E5%BB%BAaccount-container.png" alt="在GTM中创建 Account 和 Container"></p>
<p>创建 Account 时，系统会默认创建一个 Container。</p>
<ol>
<li>在 Google Tag Manager 中，点击右上角创建帐号</li>
<li>输入帐号名称，名字和国家随意</li>
<li>输入 Container 名称，然后选择如下内容类型：网站、AMP、Android 或 iOS。</li>
<li>点击创建。</li>
</ol>
<p>向现有 Account 添加新 Container</p>
<ol>
<li>在 Google Tag Manager 中，点击 Account 右侧的三个竖点，弹出菜单。</li>
<li>点击 Create Container</li>
<li>输入 Container 名称，然后选择如下内容类型：网站、AMP、Android 或 iOS。</li>
<li>点击创建。</li>
</ol>
<h2 id="如何安装-google-tag-manager">如何安装 Google Tag Manager</h2>
<p>完成 Container 的创建后，我们需要找到 Container 对应的 GTM 代码，然后把代码安装到待埋点的网站上即可。</p>
<ol>
<li>在 Google Tag Manager 中，点击工作区。</li>
<li>在靠近窗口顶部的位置，找到容器 ID，格式为“GTM-XXXXXX”。</li>
<li>点击容器 ID，打开“安装跟踪代码管理器”框。</li>
<li>按照“安装跟踪代码管理器”框中的说明，将代码段复制并粘贴到网站，或下载并安装相应的移动 SDK。</li>
</ol>
<p><img src="/images/2022/0609-%E5%AE%89%E8%A3%85-google-tag-manager.png" alt="安装 Google Tag Manager"></p>
<p>安装 Google Tag Manager 很简单，复制粘贴即可，但是需要拥有修改网站代码的权限。所以安装 Google Tag Manager 可能需要网站前端同事配合完成，先把 GTM 中生成的代码复制粘贴到 TXT 文本中，注意不要粘贴到 Word 文档中。</p>
<p>Google Tag Manager 有两段，第一段放在 <code>&lt;head&gt;</code> 标签中，第二段放在 <code>&lt;body&gt;</code> 标签中。</p>
<h2 id="如何验证-google-tag-manager-的安装结果">如何验证 Google Tag Manager 的安装结果</h2>
<p>Google Tag Assistant 是谷歌官方提供的 Chrome 浏览器扩展程序，有助于解决各种安装 Google tags 中遇到的问题，包括 Google Analytics、Google Tag Manager 等。</p>
<p><img src="/images/2022/0609-%E9%AA%8C%E8%AF%81gtm%E5%AE%89%E8%A3%85%E7%BB%93%E6%9E%9C.jpg" alt="如何验证 Google Tag Manager 的安装结果"></p>
<p>如果你正在使用 Chrome 或 Edge 浏览器，可以点击此处<a href="https://chrome.google.com/webstore/detail/tag-assistant-legacy-by-g/kejbdjndbnbjgmefkgdddjlbokphdefk" target="_blank" rel="noopener">安装 Google Tag Assistant</a>。</p>
<p>安装完成后，Google Tag Assistant 图标就会显示在 Chrome 浏览器的扩展程序栏中。点击扩展程序栏的Google Tag Assistant 图标，选择启用(Enable)。</p>
<p>刷新页面，Google Tag Assistant 将会对网页上的代码进行分析。请注意，扩展程序的图标颜色可能会改变并显示数字，具体取决于其发现的代码。</p>
<p>系统会显示记录的网页上发现的每个代码以及相应代码的详情。代码和问题消息使用不同的颜色进行标记，以表明发现的问题类型：</p>
<ul>
<li>绿色标记图标或消息表示没有发现任何代码存在问题。</li>
<li>蓝色标记图标或消息表示某个代码存在微小的实现问题，但不影响使用。</li>
<li>黄色标记图标或消息警告代码实现可能会导致结果与预期不符。</li>
<li>红色标记图标或消息表示某个代码存在严重的实现问题。相应代码可能无法正常使用，并且可能会导致报告中的数据有误或缺失。</li>
</ul>
</content>
<p>
  
  <a href="https://up.ac.cn/blog/gtm%E4%BB%A3%E7%A0%81%E7%AE%A1%E7%90%86%E5%99%A8/">#GTM代码管理器</a>
  
</p>
</main>
<footer>Copyright © <a href="https://up.ac.cn" target="_blank">Plato</a>. 订阅网站 <a href="https://up.ac.cn/index.xml" target="_blank">RSS</a></footer>
</body>
</html>